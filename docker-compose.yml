version: "3"
services:
  rabbitmq:
    image: rabbitmq:3-management
    container_name: rabbitmq
    network_mode: host
    hostname: rabbitmq
    volumes:
      - /var/lib/rabbitmq
    ports:
      - "5672:5672"
      - "15672:15672"
    environment:
      RABBITMQ_USER: guest
      RABBITMQ_PASSWORD: guest
      RABBITMQ_HOST: localhost
      RABBITMQ_PORT: 5672
      RABBITMQ_QUEUE_NAME: zegal-task
  zegaltask:
    build: .
    image: zegaltask
    container_name: zegaltask
    network_mode: host
    restart: always
    environment:
      RABBITMQ_USER: guest
      RABBITMQ_PASSWORD: guest
      RABBITMQ_HOST: localhost
      RABBITMQ_PORT: 5672
      RABBITMQ_QUEUE_NAME: zegal-task